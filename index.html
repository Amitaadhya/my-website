<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Radnik Vendor Portal</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    :root {
      --primary: #0891b2; --primary-dark: #0e7490; --secondary: #ec4899;
      --bg-dark: #1e293b; --bg-light: #334155; --bg-darker: #0f172a;
      --border-color: #475569; --text-light: #f1f5f9; --text-muted: #94a3b8;
      --success: #10b981; --danger: #f43f5e; --warning: #f59e0b; --info: #3b82f6;
    }
    * { margin: 0; padding: 0; box-sizing: border-box; }
    html { scroll-behavior: smooth; }
    body {
      font-family: 'Poppins', sans-serif; background-color: var(--bg-dark);
      color: var(--text-light); line-height: 1.6; overflow-x: hidden;
    }

    /* --- LOGIN PAGE STYLE --- */
    .login-container {
      display: flex; min-height: 100vh; width: 100%; position: fixed; top: 0; left: 0;
      z-index: 2000; background-color: var(--bg-dark); transition: opacity 0.5s ease, visibility 0.5s ease;
    }
    .login-container.hidden { opacity: 0; visibility: hidden; }
    .login-branding {
      width: 50%;
      background: linear-gradient(135deg, rgba(8, 145, 178, 0.9), rgba(14, 116, 144, 0.95)), url('https://images.unsplash.com/photo-1556742502-ec7c0e2f34b1?q=80&w=2487&auto=format&fit=crop') center/cover;
      display: flex; flex-direction: column; justify-content: center; align-items: center; text-align: center; padding: 40px; color: white;
    }
    .login-branding .logo-img { width: 100px; height: 100px; border-radius: 50%; border: 4px solid white; margin-bottom: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.3); }
    .login-branding h1 { font-size: 2.5rem; font-weight: 700; text-shadow: 0 2px 10px rgba(0,0,0,0.3); }
    .login-branding p { font-size: 1.1rem; max-width: 400px; margin-top: 10px; opacity: 0.9; }
    .login-form-wrapper { width: 50%; display: flex; justify-content: center; align-items: center; padding: 40px; }
    .login-form { width: 100%; max-width: 400px; }
    .login-form h2 { font-size: 2rem; margin-bottom: 10px; color: var(--text-light); }
    .login-form .subtitle { color: var(--text-muted); margin-bottom: 30px; }
    .login-form .input-group { position: relative; margin-bottom: 25px; }
    .login-form .input-group input {
        width: 100%; padding: 14px 20px 14px 50px; background: var(--bg-light);
        border: 1px solid var(--border-color); border-radius: 8px; font-size: 1rem;
        color: var(--text-light); transition: all 0.3s ease; outline: none;
    }
    .login-form .input-group input:focus { border-color: var(--primary); box-shadow: 0 0 0 3px rgba(8, 145, 178, 0.4); }
    .login-form .input-group i { position: absolute; left: 18px; top: 50%; transform: translateY(-50%); color: var(--text-muted); transition: color 0.3s ease; }
    .login-form .input-group input:focus + i { color: var(--primary); }
    .login-btn {
      width: 100%; padding: 15px; background: linear-gradient(135deg, var(--primary), var(--primary-dark)); color: #fff;
      border: none; border-radius: 8px; font-size: 1.1rem; font-weight: 600; cursor: pointer;
      transition: all 0.3s ease; box-shadow: 0 5px 15px rgba(8, 145, 178, 0.3);
    }
    .login-btn:hover { transform: translateY(-3px); box-shadow: 0 8px 25px rgba(8, 145, 178, 0.4); }
    .login-footer { margin-top: 30px; font-size: 0.9rem; color: var(--text-muted); text-align: center; }

    /* --- PORTAL STRUCTURE --- */
    .sidebar {
      position: fixed; top: 0; left: 0; width: 260px; height: 100vh; z-index: 1000;
      background: rgba(30, 41, 59, 0.8); backdrop-filter: blur(10px);
      border-right: 1px solid var(--border-color); display: none; flex-direction: column; padding: 20px;
    }
    .sidebar .logo { display: flex; align-items: center; gap: 12px; margin-bottom: 30px; padding: 0 10px; }
    .sidebar .logo i { color: var(--primary); font-size: 2rem; }
    .sidebar .logo h1 { font-size: 1.5rem; color: var(--text-light); font-weight: 600; }
    .sidebar-nav { flex-grow: 1; list-style: none; overflow-y: auto; }
    .sidebar-nav-item { margin-bottom: 8px; }
    .sidebar-nav-item a {
      display: flex; align-items: center; padding: 12px 15px; color: var(--text-muted);
      text-decoration: none; border-radius: 8px; transition: all 0.3s ease; font-weight: 500; cursor: pointer;
    }
    .sidebar-nav-item a i { width: 20px; margin-right: 15px; font-size: 1.1rem; }
    .sidebar-nav-item a:hover { background-color: var(--bg-light); color: var(--text-light); }
    .sidebar-footer { padding-top: 20px; border-top: 1px solid var(--border-color); }
    .user-profile { display: flex; align-items: center; gap: 12px; padding: 10px; border-radius: 8px; background-color: rgba(0,0,0,0.2); }
    #userProfilePic { width: 40px; height: 40px; border-radius: 50%; object-fit: cover; border: 2px solid var(--primary); }
    #userNameText { font-weight: 500; color: var(--text-light); }
    .logout-link { font-size: 0.8rem; color: var(--text-muted); text-decoration: none; cursor: pointer; }
    .logout-link:hover { color: var(--danger); }
    
    .main-content { margin-left: 260px; padding: 30px; display: none; }
    .main-header {
      position: sticky; top: 0; background-color: rgba(30, 41, 59, 0.9); backdrop-filter: blur(5px);
      padding: 20px; z-index: 990; margin: -30px -30px 30px -30px;
    }
    .header-top-row { display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 15px; margin-bottom: 20px; }
    .header-top-row h2 { font-size: 1.8rem; font-weight: 600; margin: 0; }
    #clock {
      font-size: 1rem; color: var(--text-muted); display: flex; align-items: center; gap: 8px;
      background-color: var(--bg-light); padding: 8px 15px; border-radius: 8px;
    }
    #clock i { color: var(--primary); }
    .search-bar { position: relative; width: 100%; }
    .search-bar input { width: 100%; padding: 12px 15px 12px 45px; background: var(--bg-light); border: 1px solid var(--border-color); border-radius: 8px; font-size: 0.95rem; color: var(--text-light); transition: all 0.3s ease; }
    .search-bar input:focus { outline: none; border-color: var(--primary); box-shadow: 0 0 0 3px rgba(8, 145, 178, 0.4); }
    .search-bar i { position: absolute; left: 15px; top: 50%; transform: translateY(-50%); color: var(--text-muted); font-size: 1rem; }

    /* === BOTONES COLORIDOS === */
    .button-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 20px; }
    .btn {
      display: flex; align-items: center; padding: 15px 20px; color: var(--text-light);
      border: 1px solid transparent; border-radius: 10px;
      text-decoration: none; font-size: 0.95rem; font-weight: 500; cursor: pointer; 
      transition: all 0.4s ease; background-size: 250% auto;
    }
    .btn i:first-child { margin-right: 12px; font-size: 1.2rem; min-width: 20px; text-align: center; transition: transform 0.3s ease; }
    .btn .btn-text { flex-grow: 1; }
    .btn:hover { transform: translateY(-4px) scale(1.02); box-shadow: 0 10px 25px rgba(0,0,0,0.3); color: white; background-position: right center; }
    .btn:hover i { transform: rotate(-5deg) scale(1.1); }
    
    .btn-1 { background-image: linear-gradient(to right, #6a11cb 0%, #2575fc 51%, #6a11cb 100%); }
    .btn-2 { background-image: linear-gradient(to right, #ec4899 0%, #f43f5e 51%, #ec4899 100%); }
    .btn-3 { background-image: linear-gradient(to right, #10b981 0%, #059669 51%, #10b981 100%); }
    .btn-4 { background-image: linear-gradient(to right, #3b82f6 0%, #1d4ed8 51%, #3b82f6 100%); }
    .btn-5 { background-image: linear-gradient(to right, #f59e0b 0%, #d97706 51%, #f59e0b 100%); }
    .btn-6 { background-image: linear-gradient(to right, #8b5cf6 0%, #7c3aed 51%, #8b5cf6 100%); }
    .btn-7 { background-image: linear-gradient(to right, #06b6d4 0%, #0891b2 51%, #06b6d4 100%); }
    .btn-8 { background-image: linear-gradient(to right, #f97316 0%, #ea580c 51%, #f97316 100%); }
    .btn-9 { background-image: linear-gradient(to right, #e879f9 0%, #c026d3 51%, #e879f9 100%); }
    .btn-10 { background-image: linear-gradient(to right, #0ea5e9 0%, #0284c7 51%, #0ea5e9 100%); }
    .btn-11 { background-image: linear-gradient(to right, #84cc16 0%, #65a30d 51%, #84cc16 100%); }
    .btn-12 { background-image: linear-gradient(to right, #facc15 0%, #eab308 51%, #facc15 100%); }
    .btn-13 { background-image: linear-gradient(to right, #a78bfa 0%, #9333ea 51%, #a78bfa 100%); }
    .btn-14 { background-image: linear-gradient(to right, #60a5fa 0%, #3b82f6 51%, #60a5fa 100%); }
    .btn-15 { background-image: linear-gradient(to right, #f472b6 0%, #ec4899 51%, #f472b6 100%); }
    .btn-16 { background-image: linear-gradient(to right, #2dd4bf 0%, #14b8a6 51%, #2dd4bf 100%); }
    .btn-17 { background-image: linear-gradient(to right, #38bdf9 0%, #10b981 51%, #38bdf9 100%); }
    .btn-18 { background-image: linear-gradient(to right, #fb923c 0%, #f97316 51%, #fb923c 100%); }
    .btn-19 { background-image: linear-gradient(to right, #818cf8 0%, #6366f1 51%, #818cf8 100%); }
    .btn-20 { background-image: linear-gradient(to right, #a78bfa 0%, #8b5cf6 51%, #a78bfa 100%); }
    .btn-21 { background-image: linear-gradient(to right, #38bdf8 0%, #0ea5e9 51%, #38bdf8 100%); }
    .btn-22 { background-image: linear-gradient(to right, #fbbf24 0%, #f59e0b 51%, #fbbf24 100%); }
    .btn-23 { background-image: linear-gradient(to right, #22d3ee 0%, #06b6d4 51%, #22d3ee 100%); }
    .btn-24 { background-image: linear-gradient(to right, #c084fc 0%, #a855f7 51%, #c084fc 100%); }
    .btn-25 { background-image: linear-gradient(to right, #4f46e5 0%, #4338ca 51%, #4f46e5 100%); }
    .btn-26 { background-image: linear-gradient(to right, #f43f5e 0%, #e11d48 51%, #f43f5e 100%); }
    .btn-27 { background-image: linear-gradient(to right, #14b8a6 0%, #0d9488 51%, #14b8a6 100%); }
    .btn-28 { background-image: linear-gradient(to right, #f59e0b 0%, #d97706 51%, #f59e0b 100%); }

    /* MODAL STYLES */
    .modal { display: none; position: fixed; z-index: 1001; left: 0; top: 0; width: 100%; height: 100%; overflow: auto; background-color: rgba(0,0,0,0.7); backdrop-filter: blur(5px); }
    .modal-content {
      background: var(--bg-light); margin: 5% auto; padding: 25px; border: 1px solid var(--border-color);
      border-radius: 15px; width: 90%; box-shadow: 0 10px 30px rgba(0,0,0,0.5); color: var(--text-light);
    }
    #userManagementModal .modal-content, #portalSettingsModal .modal-content { max-width: 800px; }
    #notepadModal .modal-content, #userProfileModal .modal-content { max-width: 500px; }
    .modal-header { display: flex; justify-content: space-between; align-items: center; padding-bottom: 15px; margin-bottom: 20px; border-bottom: 1px solid var(--border-color); }
    .modal-header h2 { font-size: 1.5rem; font-weight: 600; display: flex; align-items: center; gap: 10px;}
    .close-btn { color: var(--text-muted); font-size: 1.8rem; font-weight: bold; cursor: pointer; }
    .close-btn:hover, .close-btn:focus { color: var(--danger); }
    .modal .input-group { position: relative; margin-bottom: 20px;}
    .modal .input-group input, .modal .input-group textarea, .modal .input-group select {
        width: 100%; padding: 12px; background-color: var(--bg-dark); border: 1px solid var(--border-color); color: var(--text-light); border-radius: 8px; font-size: 0.95rem;
    }
    .modal .input-group input:focus, .modal .input-group textarea:focus { outline: none; border-color: var(--primary); box-shadow: 0 0 0 3px rgba(8, 145, 178, 0.4); }
    .action-btn {
        width: 100%; padding: 12px; background: linear-gradient(135deg, var(--primary), var(--primary-dark)); color: #fff;
        border: none; border-radius: 8px; font-size: 1rem; font-weight: 600; cursor: pointer;
        transition: all 0.3s ease; display: flex; align-items: center; justify-content: center; gap: 8px;
    }
    .action-btn:hover { transform: translateY(-2px); }
    .action-btn.danger { background: linear-gradient(135deg, var(--danger), #be123c); }
    .action-btn.secondary { background: var(--bg-darker); border: 1px solid var(--border-color); }
    #permissionsList .permission-item { display: flex; align-items: center; padding: 8px 0; border-bottom: 1px solid rgba(255,255,255,0.05); }
    #permissionsList .permission-item:last-child { border-bottom: none; }

    /* Responsive */
    @media (max-width: 992px) {
      .sidebar { transform: translateX(-100%); /* JS can toggle this */ }
      .main-content { margin-left: 0; }
      .login-branding { display: none; }
      .login-form-wrapper { width: 100%; }
    }
    @media (max-width: 576px) {
      .main-content, .main-header { padding-left: 15px; padding-right: 15px; margin-left: -15px; margin-right: -15px; }
      .header-top-row { flex-direction: column; align-items: flex-start; }
    }
  </style>
</head>
<body>

  <!-- === LOGIN PAGE === -->
  <div class="login-container" id="loginContainer">
    <div class="login-branding">
        <img src="https://i.postimg.cc/sXPJH9xd/Screenshot-2025-06-19-143219.png" alt="Portal Logo" class="logo-img">
        <h1>Amit Chaudhary</h1>
        <p>Welcome to the official Radnik Exports data and resource hub. Please log in to access your dashboard.</p>
    </div>
    <div class="login-form-wrapper">
        <div class="login-form">
            <h2>Sign In</h2>
            <p class="subtitle">Enter your credentials to continue.</p>
            <div class="input-group">
                <input type="text" id="username" placeholder="Username" required> <i class="fas fa-user"></i>
            </div>
            <div class="input-group">
                <input type="password" id="password" placeholder="Password" required> <i class="fas fa-lock"></i>
            </div>
            <button class="login-btn" onclick="validateLogin()"><i class="fas fa-sign-in-alt"></i> &nbsp; Log In</button>
            <div class="login-footer">© 2025 Radnik Exports. All rights reserved.</div>
            <p id="errorMessage" style="text-align:center; color: var(--danger); margin-top: 15px; display:none;"></p>
        </div>
    </div>
  </div>

  <!-- === PORTAL STRUCTURE === -->
  <nav class="sidebar" id="sidebar">
    <div class="logo"><i class="fas fa-cubes"></i><h1>Amit Chaudhary</h1></div>
    <ul class="sidebar-nav">
      <li class="sidebar-nav-item"><a id="dashboardLink" class="active"><i class="fas fa-th-large"></i> Amit Chaudhary</a></li>
      <li class="sidebar-nav-item"><a id="myProfileBtnSidebar"><i class="fas fa-user-cog"></i> My Profile</a></li>
      <li class="sidebar-nav-item"><a id="notepadBtnSidebar"><i class="fas fa-sticky-note"></i> Notepad</a></li>
      <li class="sidebar-nav-item admin-only" style="display: none;"><a id="userManagementBtnSidebar"><i class="fas fa-users-cog"></i> User Management</a></li>
      <li class="sidebar-nav-item admin-only" style="display: none;"><a id="portalSettingsBtnSidebar"><i class="fas fa-cogs"></i> Portal Settings</a></li>
    </ul>
    <div class="sidebar-footer">
      <div class="user-profile" id="userProfile" style="display: none;">
        <img id="userProfilePic" src="" alt="User">
        <div>
          <span id="userNameText"></span>
          <a class="logout-link" onclick="logout()"><i class="fas fa-sign-out-alt"></i> Logout</a>
        </div>
      </div>
    </div>
  </nav>

  <main class="main-content" id="mainContent">
    <header class="main-header">
      <div class="header-top-row">
        <h2>Amit Chaudhary</h2>
        <p id="clock"></p>
      </div>
      <div class="search-bar"><i class="fas fa-search"></i><input type="text" id="searchInput" placeholder="Search links by name or tag..."></div>
    </header>

    <div class="button-grid" id="buttonContainer">
      <!-- ALL BUTTONS RESTORED -->
      <a href="https://docs.google.com/spreadsheets/d/1p1LreGjZFEWSY3qfkbGaWGymDa_3kzwucDH3xHoPzqU/edit?resourcekey=&gid=1066878755#gid=1066878755" class="btn btn-1" target="_blank" data-tags="finance" data-id="noida-tax-invoice"><i class="fas fa-file-invoice-dollar"></i><span class="btn-text">Noida Tax Invoice Log</span></a>
      <a href="https://docs.google.com/spreadsheets/d/1clgoSGc3BF6u25v-cumlJMqrCOZYSydWJ_xSAOpe0FE/edit?gid=82980654#gid=82980654" class="btn btn-2" target="_blank" data-tags="finance" data-id="186-tax-invoice"><i class="fas fa-receipt"></i><span class="btn-text">186 Tax Invoice Log</span></a>
      <a href="https://192.168.20.7/vgeinvoice/LoginPage.aspx" class="btn btn-3" target="_blank" data-tags="finance,tools" data-id="eway-bill"><i class="fas fa-truck-fast"></i><span class="btn-text">E-Way Bill Dashboard</span></a>
      <a href="https://smallpdf.com/merge-pdf#r=organize-merge" class="btn btn-4" target="_blank" data-tags="tools" data-id="merge-pdf"><i class="fas fa-file-pdf"></i><span class="btn-text">Merge PDF</span></a>
      <a href="https://www.office.com/apps/?auth=2" class="btn btn-5" target="_blank" data-tags="tools" data-id="app-365"><i class="fab fa-microsoft"></i><span class="btn-text">Office 365 Apps</span></a>
      <a href="https://docs.google.com/forms/d/e/1FAIpQLSfQf5LaxGX8lLr4nN7hPmrL3mpuaFv1uzYMTaIb02IcGFHp5g/viewform" class="btn btn-6" target="_blank" data-tags="finance" data-id="chargeback-form"><i class="fas fa-undo-alt"></i><span class="btn-text">Chargeback Form</span></a>
      <a href="https://radnikexports1-my.sharepoint.com/:x:/r/personal/amit_chaudhary_radnikexports1_onmicrosoft_com/_layouts/15/Doc.aspx?sourcedoc=%7B5DE750E6-1A38-4B42-B02D-44A3D95B2D14%7D&file=Book%206.xlsx&action=editnew&mobileredirect=true" class="btn btn-7" target="_blank" data-tags="sales" data-id="daily-sale-186"><i class="fas fa-calendar-day"></i><span class="btn-text">Daily Sale 186</span></a>
      <a href="https://radnikexports1-my.sharepoint.com/:x:/r/personal/amit_chaudhary_radnikexports1_onmicrosoft_com/_layouts/15/Doc.aspx?sourcedoc=%7B866121D0-C91C-4F09-9F0B-909FBB0C2324%7D&file=DAILY%20SALE%20ENTERY%20NOIDA.xlsx&action=default&mobileredirect=true" class="btn btn-8" target="_blank" data-tags="sales" data-id="dsec16-sale"><i class="fas fa-cash-register"></i><span class="btn-text">D-S-E-C16 (Noida Sale)</span></a>
      <a href="https://docs.google.com/spreadsheets/d/11RCeL6pUqN8khww5sY_iA_t-mNgrzwQNvV-bRtLKA9s/edit?gid=0#gid=0" class="btn btn-9" target="_blank" data-tags="inventory,sales" data-id="noida-order-entry"><i class="fas fa-clipboard-check"></i><span class="btn-text">Noida Order Entry</span></a>
      <a href="https://docs.google.com/spreadsheets/d/1V92jsBq9iTbYnaoaIdmYdbYc9uoFvaimxaYScnHLD7w/edit?resourcekey=&gid=388707961#gid=388707961" class="btn btn-10" target="_blank" data-tags="finance" data-id="chargeback-data"><i class="fas fa-hand-holding-usd"></i><span class="btn-text">Chargeback Data</span></a>
      <a href="https://docs.google.com/spreadsheets/d/17XLwAmZxvmxOaB-DzPIBjuGmb3u_Zxz9_1aGn175yeE/edit?gid=0#gid=0" class="btn btn-11" target="_blank" data-tags="reports,sales" data-id="live-graph-quince"><i class="fas fa-chart-line"></i><span class="btn-text">Live Graph Quince</span></a>
      <a href="https://docs.google.com/spreadsheets/d/1c4VbDj3CCp_Lr2MCpoJXmlp2K9qP6L3pIA0eZq52PDM/edit?gid=2065470756#gid=2065470756" class="btn btn-12" target="_blank" data-tags="reports,sales" data-id="quince-2024-sale"><i class="fas fa-database"></i><span class="btn-text">QUINCE 2024 SALE DATA</span></a>
      <a href="https://docs.google.com/spreadsheets/d/1sehWq-1kvNwl0qZWOpkhapuk9mam0FjKAoJvHMV9U5o/edit?usp=sharing" class="btn btn-13" target="_blank" data-tags="inventory,operations" data-id="maersk-stock-data"><i class="fas fa-ship"></i><span class="btn-text">MAERSK Stock Data</span></a>
      <a href="https://docs.google.com/spreadsheets/d/17RWCZ62o2nRvMgZjfi_fZ6AyBQ0YmHNoIp-CCRSxJjg/edit?gid=407320691#gid=407320691" class="btn btn-14" target="_blank" data-tags="sales" data-id="quince-2025-pos"><i class="fas fa-shopping-cart"></i><span class="btn-text">QUINCE 2025 POS DATA</span></a>
      <a href="https://docs.google.com/spreadsheets/d/1PnetSLtEPxot9N3KlB_ydbzNccAF5qMnDMRmYLo6ZLs/edit?gid=0#gid=0" class="btn btn-15" target="_blank" data-tags="sales,finance" data-id="quince-invoice-summary"><i class="fas fa-file-invoice"></i><span class="btn-text">Quince Invoice Summary</span></a>
      <a href="https://docs.google.com/spreadsheets/d/1riS3U9aPW7s8SQmqaZkGrb2fHVEdDbJdHxwdygaeKXc/edit?gid=1345083956#gid=1345083956" class="btn btn-16" target="_blank" data-tags="sales,reports" data-id="ggn-sales-overview"><i class="fas fa-city"></i><span class="btn-text">Gurugram Sales Overview</span></a>
      <a href="https://docs.google.com/spreadsheets/d/15Xma9DRkRectWPqUKDQlr5yZQMtCfQ2Bxa_J5vU-Es0/edit?gid=1345083956#gid=1345083956" class="btn btn-17" target="_blank" data-tags="sales,reports" data-id="noida-sales-overview"><i class="fas fa-building-user"></i><span class="btn-text">Noida Sales Overview</span></a>
      <a href="https://sites.google.com/view/bossanishji/" class="btn btn-18" target="_blank" data-tags="tools" data-id="anish-sir-site"><i class="fas fa-user-tie"></i><span class="btn-text">Anish Sir's Site</span></a>
      <a href="https://sites.google.com/view/radnikaks/home?authuser=0" class="btn btn-19" target="_blank" data-tags="tools" data-id="amit-chaudhary-site"><i class="fas fa-user-astronaut"></i><span class="btn-text">Amit Chaudhary's Site</span></a>
      <a href="https://docs.google.com/spreadsheets/d/e/2PACX-1vQ_ihmuGBmPjY_SF6zXQe825cL0i3O9FjTod0gVVgjvc9uSU1HrQsSxcGSVRLAUrJA8NjruJPKs7ezi/pubhtml?gid=1345083956&single=true" class="btn btn-20" target="_blank" data-tags="reports" data-id="186-qs-view"><i class="fas fa-chart-pie"></i><span class="btn-text">186-Q-S-VIEW</span></a>
      <a href="https://docs.google.com/spreadsheets/d/e/2PACX-1vT1MRNcqWJsXyp4gKAq00N2qKmjoNgXkwVCmxH2lBeeitlz0kNfSiY-z1sNK2JTciPN6mzUpF9-G36Z/pubhtml?gid=1345083956&single=true" class="btn btn-21" target="_blank" data-tags="reports" data-id="c16-qs-view"><i class="fas fa-chart-area"></i><span class="btn-text">C16-Q-S-VIEW</span></a>
      <a href="https://docs.google.com/spreadsheets/d/1m3q0x9wKoM7Q7EBSCvpCTozbtB0-73xmgOO_Yx0EBAg/edit?gid=579600821#gid=579600821" class="btn btn-22" target="_blank" data-tags="inventory" data-id="c16-import-details"><i class="fas fa-file-import"></i><span class="btn-text">C16-IMPORT DETAILS</span></a>
      <a href="https://docs.google.com/spreadsheets/d/1LZa3JvfEdt-9cdQkEmsEluwurMoDzmsXIyFWNpAcnfs/edit?gid=1102120828#gid=1102120828" class="btn btn-23" target="_blank" data-tags="inventory" data-id="ggn-prep-2025"><i class="fas fa-tasks"></i><span class="btn-text">GGN-PREPEMENT 2025</span></a>
      <a href="https://docs.google.com/spreadsheets/d/1l2CnQrl9YEfOFAoiqj82DYwJ-zQWYqCX5HuL87ffRlw/edit?gid=2040776333#gid=2040776333" class="btn btn-24" target="_blank" data-tags="reports,sales" data-id="quince-hk"><i class="fas fa-globe-asia"></i><span class="btn-text">Quince Hong Kong</span></a>
      <a href="https://docs.google.com/spreadsheets/d/1QzAuxxuLUz60iWbdiVGzAFDjXY0RSZIda_0VOhbloEU/edit?gid=1012800260#gid=1012800260" class="btn btn-25" target="_blank" data-tags="reports,sales" data-id="projection-vs-sales"><i class="fas fa-bullseye"></i><span class="btn-text">Projection VS Sales Report</span></a>
      <a href="https://docs.google.com/spreadsheets/d/1JFI22zsy2Pa5d2lq4dcEeCZIg7rqFaBMYPzniBdlhMc/edit?gid=874524179#gid=874524179" class="btn btn-26" target="_blank" data-tags="reports,inventory" data-id="quince-order-chart"><i class="fas fa-list-ol"></i><span class="btn-text">QUINCE ORDER CHART</span></a>
      <a href="https://docs.google.com/spreadsheets/d/1f7bODkOgwvN_i-nWItzn_67IZv0EqXxAqr2v-ZRQ8Vg/edit?gid=685323596#gid=685323596" class="btn btn-27" target="_blank" data-tags="reports,sales" data-id="projection-vs-actual"><i class="fas fa-project-diagram"></i><span class="btn-text">PROJECTION VS ACTUAL</span></a>
      <a href="https://docs.google.com/spreadsheets/d/1_5-nGWZmyI5WkTSp6muKe7uEhel7DoAzX1oisoBz1Xw/edit?gid=211447390#gid=211447390" class="btn btn-28" target="_blank" data-tags="reports,sales,inventory" data-id="quince-sale-hub"><i class="fas fa-sitemap"></i><span class="btn-text">Quince Sale All Data Hub</span></a>
      <a href="https://docs.google.com/spreadsheets/d/1bQqiCaiQ_JGN_B-415ftvVgoH9MmaF9A4ydZkkYXS-Q/edit?gid=5003036#gid=5003036" class="btn btn-1" target="_blank" data-tags="inventory" data-id="po-wise-qty"><i class="fas fa-exchange-alt"></i><span class="btn-text">PO Wise Qty Send/Sale</span></a>
      <a href="https://amitaadhya.github.io/Quincesaleggn/" class="btn btn-2" target="_blank" data-tags="reports,sales" data-id="sales-perf-ggn"><i class="fas fa-tachometer-alt"></i><span class="btn-text">Sales Perf. Dashboard-GGN</span></a>
      <a href="https://amitaadhya.github.io/noidaquincesale/" class="btn btn-3" target="_blank" data-tags="reports,sales" data-id="sales-perf-noida"><i class="fas fa-chart-bar"></i><span class="btn-text">NOIDA-Sales Perf. Dash.</span></a>
      <a href="https://docs.google.com/spreadsheets/d/1GQucVQMxZanFgg27PGDpflR49a6DksezH4Pby2uFu4A/edit?gid=0#gid=0" class="btn btn-4" target="_blank" data-tags="reports,finance" data-id="quince-style-value"><i class="fas fa-dollar-sign"></i><span class="btn-text">QUINCE Style Name Wise Value</span></a>
      <a href="https://docs.google.com/spreadsheets/d/1PnetSLtEPxot9N3KlB_ydbzNccAF5qMnDMRmYLo6ZLs/edit?gid=0#gid=0" class="btn btn-5" target="_blank" data-tags="reports,sales" data-id="quince-invoice-summary-2"><i class="fas fa-file-alt"></i><span class="btn-text">Quince_Invoice Summary</span></a>
      <a href="https://script.google.com/macros/s/AKfycbwMLk_TuKGtxzLFMxIoLVONqYMS5RRCf3cBqS9zDw/dev" class="btn btn-6" target="_blank" data-tags="reports,sales" data-id="style-analyzer-ggn"><i class="fas fa-search-dollar"></i><span class="btn-text">Quince_ Style Analyzer_GGN</span></a>
      <a href="https://script.google.com/macros/s/AKfycbzljj_8OxdNR2AtJqxfTD_oB11YGTdF0MGulyLCvpE/dev" class="btn btn-7" target="_blank" data-tags="reports,sales" data-id="style-analyzer-noida"><i class="fas fa-search-location"></i><span class="btn-text">Quince_ Style Analyzer_NOIDA</span></a>
      <a href="https://docs.google.com/spreadsheets/d/1EfFlN6kb_q08R3cWQT_LJfRoSCKvGpS_JkJGZaUMA34/edit?gid=2040776333#gid=2040776333" class="btn btn-8" target="_blank" data-tags="reports,sales" data-id="quince-shipping-data"><i class="fas fa-globe-americas"></i><span class="btn-text">Quince Mexcio & Canada Ship Data </span></a>
      <a href="https://www.notion.so/Welcome-to-Amit-Chaudhary-22a7a00d4f9780fe8865e67bf16d2430" class="btn btn-9" target="_blank" data-tags="tools" data-id="useful-websites"><i class="fas fa-star"></i><span class="btn-text">Most Useful Websites (AKS!)</span></a>
      <a href="https://script.google.com/macros/s/AKfycbw6qke8xOhYaqaxcjFOgp-_wtWAwXEAfVqJA8e6-A/dev" class="btn btn-10" target="_blank" data-tags="finance,reports,sales" data-id="ggn-revenue-chargeback"><i class="fas fa-file-excel"></i><span class="btn-text">GGN Revenue & Chargeback Summary</span></a>
      <a href="https://script.google.com/macros/s/AKfycbw1Dpw--Ar3rNg3IgPn3e32gpUODmv_O12053XHUYc/dev" class="btn btn-11" target="_blank" data-tags="finance,reports,sales" data-id="noida-revenue-chargeback"><i class="far fa-file-excel"></i><span class="btn-text">NOIDA Revenue & Chargeback Summary</span></a>
      <a href="https://script.google.com/macros/s/AKfycbwEj1e1d0DfYqaTPbDarQTTYiMaiRWOodd5Cu6x4Sc/dev" class="btn btn-12" target="_blank" data-tags="finance,reports,sales" data-id="payment-management"><i class="fas fa-credit-card"></i><span class="btn-text">Radnik Q Payment Management</span></a>
      <a href="https://docs.google.com/spreadsheets/d/1pcb48pdm_kwASlmRACu1_E3s1_DHcofF5uOx6h4mLXY/edit?gid=1794473938#gid=1794473938" class="btn btn-13" target="_blank" data-tags="finance,reports" data-id="quince-po-records"><i class="fas fa-archive"></i><span class="btn-text">QUINCE PO RECORDS</span></a>
    </div>
  </main>
  
  <!-- MODALS -->
  <div id="userProfileModal" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <h2><i class="fas fa-user-cog"></i> My Profile Settings</h2><span class="close-btn" onclick="closeModal('userProfileModal')">×</span>
        </div>
        <div id="userProfileMessage" style="margin-bottom:15px; display:none; text-align: center;"></div>
        <div style="text-align: center; margin-bottom: 20px;">
            <img id="profilePicPreview" src="" alt="Profile Preview" style="width: 120px; height: 120px; border-radius: 50%; object-fit: cover; border: 4px solid var(--primary);">
        </div>
        <div class="input-group">
            <input type="text" id="profilePicUrl" placeholder=" "><label><i class="fas fa-image"></i> Profile Picture URL</label>
        </div>
        <div class="input-group">
            <input type="password" id="profileNewPassword" placeholder=" "><label><i class="fas fa-key"></i> New Password (leave blank)</label>
        </div>
        <button class="action-btn" onclick="saveUserProfile()"><i class="fas fa-save"></i> Save Changes</button>
    </div>
  </div>
  <div id="notepadModal" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <h2><i class="fas fa-sticky-note"></i> My Notepad</h2><span class="close-btn" onclick="closeModal('notepadModal')">×</span>
        </div>
        <div class="input-group"><textarea id="notepadTextarea" placeholder="Your notes here..." style="height: 200px; resize: vertical;"></textarea></div>
        <button class="action-btn" onclick="saveNotepadContent()"><i class="fas fa-save"></i> Save Notes</button>
    </div>
  </div>
  <div id="userManagementModal" class="modal">
    <div class="modal-content">
      <div class="modal-header"><h2><i class="fas fa-users-cog"></i> User Management</h2><span class="close-btn" onclick="closeModal('userManagementModal')">×</span></div>
      <div id="userManagementMessage" style="margin-bottom:15px; display:none; text-align: center;"></div>
      <div style="display: grid; grid-template-columns: 1fr 1.5fr; gap: 20px;">
        <div>
          <h3><i class="fas fa-user-plus"></i> Create New User</h3>
          <div class="input-group"><input type="text" id="newUsername" placeholder=" "><label>Username</label></div>
          <div class="input-group"><input type="password" id="newPassword" placeholder=" "><label>Password</label></div>
          <button class="action-btn" onclick="handleCreateUser()"><i class="fas fa-plus-circle"></i> Create</button>
        </div>
        <div>
          <h3><i class="fas fa-user-edit"></i> Edit Permissions</h3>
          <div class="input-group"><select id="selectUserForPermissions" onchange="loadPermissionsForSelectedUser()"><option value="">-- Select User --</option></select></div>
          <div id="permissionsContainer" style="display:none;">
            <h4>Button Access:</h4><div id="permissionsList" style="max-height: 250px; overflow-y: auto; padding:10px; background: var(--bg-dark); border-radius: 8px;"></div>
            <button class="action-btn" onclick="handleSavePermissions()" style="margin-top: 20px;"><i class="fas fa-save"></i> Save</button>
            <button class="action-btn danger" onclick="handleDeleteUser()" style="margin-top: 10px;" id="deleteUserBtn" disabled><i class="fas fa-user-times"></i> Delete User</button>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div id="portalSettingsModal" class="modal">
    <div class="modal-content">
      <div class="modal-header"><h2><i class="fas fa-cogs"></i> Portal Settings</h2><span class="close-btn" onclick="closeModal('portalSettingsModal')">×</span></div>
      <p>Portal Settings are under development.</p>
    </div>
  </div>

<script>
    // --- Constants & State ---
    const USERS_KEY = 'radnikPortalUsers_v5';
    const USER_PERMISSIONS_KEY = 'radnikPortalPermissions_v5';
    let currentUser = null;

    // --- Core Functions ---
    const getFromLocalStorage = (key, def) => { try { return JSON.parse(localStorage.getItem(key)) || def; } catch { return def; } };
    const saveToLocalStorage = (key, data) => localStorage.setItem(key, JSON.stringify(data));
    const getUsers = () => getFromLocalStorage(USERS_KEY, []);
    const saveUsers = (users) => saveToLocalStorage(USERS_KEY, users);
    const getUserPermissions = () => getFromLocalStorage(USER_PERMISSIONS_KEY, {});
    const saveUserPermissions = (perms) => saveToLocalStorage(USER_PERMISSIONS_KEY, perms);
    const simpleHash = (s) => { if(!s) return ""; let h = 0; for(let i=0;i<s.length;i++) h = (h<<5)-h+s.charCodeAt(i)|0; return "h_"+h.toString(36); };
    const isUserAdmin = () => currentUser && currentUser.username.toLowerCase() === 'admin';
    const showMessage = (elId, msg, type) => {
        const el = document.getElementById(elId);
        el.textContent = msg;
        el.style.color = type === 'error' ? 'var(--danger)' : 'var(--success)';
        el.style.display = 'block';
        setTimeout(() => el.style.display = 'none', 3000);
    };

    // --- Authentication ---
    function validateLogin() {
        const username = document.getElementById('username').value.trim();
        const password = document.getElementById('password').value.trim();
        if (!username || !password) return showMessage('errorMessage', 'Username & Password required.', 'error');
        
        const user = getUsers().find(u => u.username.toLowerCase() === username.toLowerCase() && u.password === simpleHash(password));

        if (user) {
            currentUser = user;
            document.getElementById('loginContainer').classList.add('hidden');
            document.getElementById('sidebar').style.display = 'flex';
            document.getElementById('mainContent').style.display = 'block';
            document.getElementById('userProfile').style.display = 'flex';
            document.getElementById('userNameText').textContent = currentUser.username;
            document.getElementById('userProfilePic').src = currentUser.profilePicUrl;
            document.body.classList.toggle('admin-mode', isUserAdmin());
            document.querySelectorAll('.admin-only').forEach(el => el.style.display = isUserAdmin() ? 'flex' : 'none');
            renderAllButtons();
        } else {
            showMessage('errorMessage', 'Invalid username or password.', 'error');
        }
    }

    function logout() {
        currentUser = null;
        document.getElementById('loginContainer').classList.remove('hidden');
        document.getElementById('sidebar').style.display = 'none';
        document.getElementById('mainContent').style.display = 'none';
        document.getElementById('username').value = '';
        document.getElementById('password').value = '';
    }

    // --- Button Rendering ---
    function renderAllButtons() {
        assignButtonIdsAndTextWrappers();
        applyButtonVisibility();
    }
    
    function assignButtonIdsAndTextWrappers() {
        document.querySelectorAll('#buttonContainer .btn').forEach((button) => {
            if (!button.dataset.id) {
                const text = button.querySelector('.btn-text')?.textContent.trim().toLowerCase().replace(/[^a-z0-9]+/g, '-') || `btn-${Math.random()}`;
                button.dataset.id = text.substring(0, 30);
            }
        });
    }

    function applyButtonVisibility() {
        const permissions = getUserPermissions()[currentUser.username] || [];
        document.querySelectorAll('#buttonContainer .btn').forEach(button => {
            if (isUserAdmin() || permissions.includes(button.dataset.id)) {
                button.style.display = 'flex';
            } else {
                button.style.display = 'none';
            }
        });
        filterBySearchAndTag();
    }

    function filterBySearchAndTag() {
        const searchTerm = document.getElementById('searchInput').value.toLowerCase();
        document.querySelectorAll('#buttonContainer .btn').forEach(button => {
            if (button.style.display === 'none' && !isUserAdmin()) return;

            const text = button.querySelector('.btn-text').textContent.toLowerCase();
            const tags = button.dataset.tags || '';
            const isMatch = text.includes(searchTerm) || tags.includes(searchTerm);

            // Re-apply visibility based on permissions before showing search results
            const permissions = getUserPermissions()[currentUser.username] || [];
            const hasPermission = isUserAdmin() || permissions.includes(button.dataset.id);

            button.style.display = (isMatch && hasPermission) ? 'flex' : 'none';
        });
    }


    // --- Modals ---
    const openModal = (id) => { document.getElementById(id).style.display = 'block'; };
    const closeModal = (id) => { document.getElementById(id).style.display = 'none'; };

    function openUserProfileModal() {
        if (!currentUser) return;
        document.getElementById('profilePicPreview').src = currentUser.profilePicUrl;
        document.getElementById('profilePicUrl').value = currentUser.profilePicUrl;
        document.getElementById('profileNewPassword').value = '';
        openModal('userProfileModal');
    }

    function saveUserProfile() {
        const users = getUsers();
        const userIndex = users.findIndex(u => u.username === currentUser.username);
        if (userIndex === -1) return;
        
        users[userIndex].profilePicUrl = document.getElementById('profilePicUrl').value.trim();
        const newPass = document.getElementById('profileNewPassword').value;
        if (newPass) users[userIndex].password = simpleHash(newPass);

        saveUsers(users);
        currentUser = users[userIndex];
        document.getElementById('userProfilePic').src = currentUser.profilePicUrl;
        showMessage('userProfileMessage', 'Profile updated!', 'success');
        setTimeout(() => closeModal('userProfileModal'), 1500);
    }

    function openNotepadModal() {
        document.getElementById('notepadTextarea').value = getFromLocalStorage('notepad_' + currentUser.username, '');
        openModal('notepadModal');
    }

    function saveNotepadContent() {
        saveToLocalStorage('notepad_' + currentUser.username, document.getElementById('notepadTextarea').value);
        alert('Notes saved!');
        closeModal('notepadModal');
    }

    function openUserManagementModal() {
        if (!isUserAdmin()) return;
        populateUsersDropdown();
        document.getElementById('permissionsContainer').style.display = 'none';
        openModal('userManagementModal');
    }

    function handleCreateUser() {
        const username = document.getElementById('newUsername').value.trim();
        const password = document.getElementById('newPassword').value.trim();
        if (!username || !password) return showMessage('userManagementMessage', 'All fields required.', 'error');
        
        const users = getUsers();
        if (users.some(u => u.username.toLowerCase() === username.toLowerCase())) return showMessage('userManagementMessage', 'User already exists.', 'error');
        
        users.push({ username, password: simpleHash(password), profilePicUrl: 'https://i.pravatar.cc/150' });
        saveUsers(users);
        showMessage('userManagementMessage', 'User created!', 'success');
        document.getElementById('newUsername').value = '';
        document.getElementById('newPassword').value = '';
        populateUsersDropdown();
    }
    
    function populateUsersDropdown() {
        const select = document.getElementById('selectUserForPermissions');
        const currentValue = select.value;
        select.innerHTML = '<option value="">-- Select User --</option>';
        getUsers().filter(u => u.username !== 'admin').forEach(user => {
            const selected = user.username === currentValue ? 'selected' : '';
            select.innerHTML += `<option value="${user.username}" ${selected}>${user.username}</option>`;
        });
    }

    function loadPermissionsForSelectedUser() {
        const username = document.getElementById('selectUserForPermissions').value;
        const container = document.getElementById('permissionsContainer');
        const listEl = document.getElementById('permissionsList');
        document.getElementById('deleteUserBtn').disabled = !username;
        if (!username) { container.style.display = 'none'; return; }
        
        const userPerms = getUserPermissions()[username] || [];
        listEl.innerHTML = '';
        document.querySelectorAll('#buttonContainer .btn').forEach(button => {
            const id = button.dataset.id;
            const text = button.querySelector('.btn-text').textContent;
            const checked = userPerms.includes(id) ? 'checked' : '';
            listEl.innerHTML += `
                <div class="permission-item">
                    <input type="checkbox" id="perm-${id}" value="${id}" ${checked}>
                    <label for="perm-${id}">${text}</label>
                </div>`;
        });
        container.style.display = 'block';
    }

    function handleSavePermissions() {
        const username = document.getElementById('selectUserForPermissions').value;
        if (!username) return;
        
        const perms = getUserPermissions();
        perms[username] = Array.from(document.querySelectorAll('#permissionsList input:checked')).map(cb => cb.value);
        saveUserPermissions(perms);
        showMessage('userManagementMessage', 'Permissions saved!', 'success');
    }

    function handleDeleteUser() {
        const username = document.getElementById('selectUserForPermissions').value;
        if (!username || !confirm(`Delete user "${username}"? This cannot be undone.`)) return;

        saveUsers(getUsers().filter(u => u.username !== username));
        const perms = getUserPermissions();
        delete perms[username];
        saveUserPermissions(perms);

        showMessage('userManagementMessage', 'User deleted.', 'success');
        populateUsersDropdown();
        document.getElementById('permissionsContainer').style.display = 'none';
    }

    // --- Init ---
    function initializeDefaultAdmin() {
        let users = getUsers();
        const defaultPic = 'https://i.postimg.cc/sXPJH9xd/Screenshot-2025-06-19-143219.png';
        const ensureUser = (username, password) => {
            if (!users.find(u => u.username === username)) {
                users.push({ username, password: simpleHash(password), profilePicUrl: defaultPic });
            }
        };
        ensureUser('admin', 'aminehu@123');
        ensureUser('amit', 'aminehu@123');
        saveUsers(users);
    }
    
    function updateClock() {
        const el = document.getElementById('clock');
        if (el) el.innerHTML = `<i class="far fa-calendar-alt"></i> ${new Date().toLocaleString('en-US', { weekday: 'long', month: 'long', day: 'numeric', hour: '2-digit', minute: '2-digit' })}`;
    }

    document.addEventListener('DOMContentLoaded', () => {
        initializeDefaultAdmin();
        updateClock();
        setInterval(updateClock, 30000);
        
        document.getElementById('searchInput').addEventListener('input', filterBySearchAndTag);
        document.getElementById('loginContainer').addEventListener('keypress', e => e.key === 'Enter' && validateLogin());

        document.getElementById('myProfileBtnSidebar').addEventListener('click', openUserProfileModal);
        document.getElementById('notepadBtnSidebar').addEventListener('click', openNotepadModal);
        document.getElementById('userManagementBtnSidebar').addEventListener('click', openUserManagementModal);
        document.getElementById('portalSettingsBtnSidebar').addEventListener('click', () => openModal('portalSettingsModal'));
    });
</script>
</body>
</html>
